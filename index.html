<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>info – mattia de lotto</title>
  <meta name="description" content="Portfolio info of Mattia De Lotto...">
  <link rel="preload" href="img/arrow-social.svg" as="image">
  <link rel="preload" href="img/arrow-archive.svg" as="image">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="/img/favicon.png" />

  <style>
    * {
      box-sizing: border-box;
    }
    html {
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      font-family: 'Source Code Pro', monospace;
      font-size: 16px;
      font-weight: 300;
      line-height: 1.7;
      background-color: #fff;
      color: #111;
      padding: 0 30px;
      cursor: crosshair;
      transition: all 0.5s ease;
    }

    /* Social & main content vanish on .collapsed */
    .collapsed main.container,
    .collapsed .header .social {
      display: none;
    }

    a, button.archive-link {
      text-decoration: underline;
      color: #111;
      font-weight: 300;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: color 0.2s ease;
      cursor: pointer;
      background: none;
      border: none;
      font-family: inherit;
      padding: 0;
      font-size: inherit;
    }
    a:hover, button.archive-link:hover, .table-head:hover {
      color: #555;
    }

    .arrow-icon {
      width: 18px;
      height: 18px;
    }
    .arrow-icon img {
      width: 100%;
      height: 100%;
      transition: transform 0.3s ease;
      transform-origin: center;
      display: block;
      transform: rotate(0deg);
    }
    a:hover .arrow-icon img,
    button.archive-link:hover .arrow-icon img,
    button.archive-link.active .arrow-icon img {
      transform: rotate(45deg);
    }

    /* Basic layout */
    .wrapper {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 2rem 0 1rem;
      transition: all 0.3s ease;
    }
    .social {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      transition: all 0.3s ease;
    }
    .social a {
      margin-bottom: 0.5rem;
    }
    main.container {
      display: flex;
      justify-content: space-between;
      padding: 1rem 0;
      transition: all 0.3s ease;
    }
    .content {
      width: 70%;
      transition: all 0.3s ease;
    }

    /* The pinned container for archive + search + catalogue */
    #bottom-block {
      position: fixed;
      left: 30px;
      bottom: 2rem; /* initial position */
      transition: bottom 0.6s ease; /* we animate 'bottom' now */
    }
    /* Slide up: set bottom higher */
    #bottom-block.slide-up {
      bottom: 12rem; /* or however high you want it */
    }

    footer.archive {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 1rem;
      transition: all 0.5s ease;
    }

    #search-container {
      display: none;
      align-items: center;
      gap: 10px;
      margin-left: 10px;
    }
    #search-toggle {
      background: none;
      border: none;
      cursor: pointer;
      outline: none;
    }
    #search-toggle img {
      width: 20px;
      height: 20px;
    }
    #search-input {
      display: none;
      margin-left: 10px;
      padding: 0;
      font-family: inherit;
      font-size: 16px;
      border: none;
      background: transparent;
      color: #111;
      outline: none;
      border-bottom: 1px solid #111;
    }

    .catalogue {
      display: none;
      opacity: 0;
      transform: translateY(80px);
      transition: opacity 0.6s ease, transform 0.6s ease;
      overflow-x: auto;
      padding-bottom: 3rem;
    }
    .catalogue.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .table-row {
      display: grid;
      grid-template-columns: 1fr 4fr 3fr 1fr 3fr 0.5fr;
      padding: 0.5rem 0;
      border-bottom: 1px solid #111;
      align-items: center;
      cursor: crosshair;
    }
    .table-row.expanded .details {
      display: block;
    }
    .indicator {
      font-size: 12px;
      justify-self: center;
    }
    .table-row:not(.table-head):hover {
      background-color: #111;
      color: #fff;
    }
    .has-details {
      cursor: pointer;
    }
    .details {
      display: none;
      grid-column: 1 / -1;
      padding-top: 1rem;
    }

    @media (max-width: 768px) {
      body {
        padding: 0 20px;
      }
      .header,
      main.container {
        flex-direction: column;
      }
      .content,
      .social {
        width: 100%;
        align-items: flex-start;
      }
      .table-row {
        min-width: 600px;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <header class="header">
      <div>Mattia De Lotto</div>
      <div class="social">
        <a href="https://www.instagram.com/mattiadelotto/" target="_blank">
          Instagram <span class="arrow-icon"><img src="img/arrow-social.svg" alt="External link icon"></span>
        </a>
        <a href="https://www.linkedin.com/in/mattia-de-lotto/" target="_blank">
          LinkedIn <span class="arrow-icon"><img src="img/arrow-social.svg" alt="External link icon"></span>
        </a>
        <a id="email-link" style="cursor:pointer;">
          Contact <span class="arrow-icon"><img src="img/arrow-social.svg" alt="Email link icon"></span>
        </a>
      </div>
    </header>

    <main class="container">
      <div class="content">
        <p>Mattia De Lotto is an Italian architectural designer currently based in Delft, the Netherlands. He completed his Bachelor's Degree in Architecture at Iuav University of Venice and is now finishing his Master's at the Faculty of Architecture at TU Delft, where he's currently working on his graduation thesis.</p>
        <p>Currently he is working at the Faculty of Architecture at TU Delft as an assistant to the research project Port City Future.</p>
        <p>He has worked first at GEZA Architettura in Udine (Italy) and then majoral·tissino architects in Barcelona (Spain), gaining experience on a variety of projects across different scales and contexts.</p>
        <p>His latest research project, "The (Im)possible Palimpsest", reflects on Piranesi’s Campo Marzio and is set to be published by Drawing Matter.</p>
      </div>
    </main>
  </div>

  <!-- pinned container for the archive & search + catalogue -->
  <div id="bottom-block">
    <footer class="archive">
      <button class="archive-link" id="archive-btn" onclick="toggleArchive()">
        Archive <span class="arrow-icon"><img src="img/arrow-archive.svg" alt="Toggle archive"></span>
      </button>

      <div id="search-container">
        <button id="search-toggle">
          <img src="img/search-icon.svg" alt="Search"/>
        </button>
        <input
          type="text"
          id="search-input"
          placeholder="Find a project..."
          onkeyup="filterCatalogue()"
        />
      </div>
    </footer>

    <div class="catalogue" id="catalogue">
      <div class="table-row table-head">
        <div onclick="sortTable(0)">Code <span id="arrow-0"></span></div>
        <div onclick="sortTable(1)">Title <span id="arrow-1"></span></div>
        <div onclick="sortTable(2)">Type <span id="arrow-2"></span></div>
        <div onclick="sortTable(3)">Year <span id="arrow-3"></span></div>
        <div onclick="sortTable(4)">Category <span id="arrow-4"></span></div>
        <div></div>
      </div>
      <div class="table-row">
        <div>001</div>
        <div>Venetian Tale</div>
        <div>Pavilion</div>
        <div>2020</div>
        <div>Academic (Iuav Venice)</div>
        <div class="indicator">○</div>
      </div>
      <div class="table-row has-details" onclick="toggleDetails(this)">
        <div>002</div>
        <div>Palimpsest Tower</div>
        <div>Pavilion</div>
        <div>2020</div>
        <div>Competition</div>
        <div class="indicator">●</div>
        <div class="details">
          <p>Competition for ArkxSite in collaboration with Alessandra D'Acunto.</p>
        </div>
      </div>
      <!-- Etc... all your other project rows, same pattern -->
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const emailLink = document.getElementById('email-link');
      const user = 'hello.mattiadelotto';
      const domain = 'gmail.com';
      emailLink.href = `mailto:${user}@${domain}`;
    });

    function toggleArchive() {
      // If you want to hide main/container & social:
      document.body.classList.toggle('collapsed');

      const bottomBlock   = document.getElementById('bottom-block');
      const searchContainer = document.getElementById('search-container');
      const catalogue     = document.getElementById('catalogue');
      const archiveBtn    = document.getElementById('archive-btn');

      const isActive = catalogue.classList.toggle('active');
      archiveBtn.classList.toggle('active');

      if (isActive) {
        // Show search container right away
        searchContainer.style.display = 'flex';

        // show & fade in the catalogue
        catalogue.style.display = 'block';
        requestAnimationFrame(() => {
          catalogue.style.opacity = '1';
          catalogue.style.transform = 'translateY(0)';
        });

        // after some short delay, move from bottom:2rem => bottom:12rem
        setTimeout(() => {
          bottomBlock.classList.add('slide-up');
        }, 300);
      } else {
        catalogue.classList.remove('active');
        catalogue.style.opacity = '0';
        catalogue.style.transform = 'translateY(80px)';
        archiveBtn.classList.remove('active');
        setTimeout(() => {
          catalogue.style.display = 'none';
        }, 600);
        searchContainer.style.display = 'none';
        bottomBlock.classList.remove('slide-up');
      }
    }

    function toggleDetails(row) {
      row.classList.toggle('expanded');
    }

    let currentSort = { column: null, ascending: true };
    function filterCatalogue() {
      const input = document.getElementById('search-input');
      const filter = input.value.toLowerCase();
      const rows = document.querySelectorAll('.table-row:not(.table-head)');

      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(filter) ? '' : 'none';
      });
    }

    document.getElementById('search-toggle').addEventListener('click', () => {
      const input = document.getElementById('search-input');
      input.style.display = (input.style.display === 'none' || input.style.display === '') ? 'inline-block' : 'none';
      if (input.style.display === 'inline-block') input.focus();
    });

    function sortTable(colIndex) {
      const table = document.getElementById('catalogue');
      const rows = Array.from(table.querySelectorAll('.table-row:not(.table-head)'));

      // Toggle ascending/descending
      if (currentSort.column === colIndex) {
        currentSort.ascending = !currentSort.ascending;
      } else {
        currentSort.column = colIndex;
        currentSort.ascending = true;
      }

      // Sort rows
      const sorted = rows.sort((a, b) => {
        const aText = a.children[colIndex].textContent.trim().toLowerCase();
        const bText = b.children[colIndex].textContent.trim().toLowerCase();
        return currentSort.ascending
          ? aText.localeCompare(bText, undefined, { numeric: true })
          : bText.localeCompare(aText, undefined, { numeric: true });
      });
      sorted.forEach(row => table.appendChild(row));

      // arrow
      for (let i = 0; i < 5; i++) {
        const arrow = document.getElementById(`arrow-${i}`);
        arrow.textContent = (i === colIndex)
          ? (currentSort.ascending ? '↑' : '↓')
          : '';
      }
    }
  </script>
</body>
</html>
